TIMER EQU 10H
PIC EQU 20H
EOI EQU 20H
N_CLK EQU 10
ORG 40
IP_CLK DW RUT_CLK
ORG 1000H
SEG_1 DB 30H
SEG_2 DB 30H
DOS_PUNTOS DB 03AH
SEG_3 DB 30H
SEG_4 DB 30H
GUION DB 20H
FIN DB ?
ORG 3000H

;RESET_2;

RUT_CLK: PUSH AX

INC CL
INC SEG_4
CMP SEG_4, 3AH
JNZ RESET
MOV SEG_4, 30H
INC SEG_3
CMP SEG_3, 36H
JNZ RESET
MOV SEG_3, 30H
INC SEG_2
CMP SEG_2,3AH
JNZ RESET
MOV SEG_2,30H
INC SEG_1
CMP SEG_1,36H
JNZ RESET
MOV SEG_4,00H
MOV SEG_3,00H
MOV SEG_2,00H
MOV SEG_1,00H
RESET: CMP CL,0AH
JNZ SEGUIR
INT 7
MOV CL,00H
SEGUIR:MOV AL, 0
OUT TIMER, AL
MOV AL, EOI
OUT PIC, AL
POP AX

IRET
ORG 2000H
CLI
MOV AL, 0FDH
OUT PIC+1, AL ; PIC: registro IMR
MOV AL, N_CLK
OUT PIC+5, AL ; PIC: registro INT1
MOV AL, 1
OUT TIMER+1, AL ; TIMER: registro COMP
MOV AL, 0
OUT TIMER, AL ; TIMER: registro CONT
MOV BX, OFFSET SEG_1
MOV AL, OFFSET FIN-OFFSET SEG_1
STI
LAZO: JMP LAZO
END
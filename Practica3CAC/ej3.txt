PIC EQU 20H
TIMER EQU 10H
PIO EQU 30H
N_CLK EQU 10
ORG 40
IP_CLK DW RUT_CLK
ORG 1000H
LED DB 0


ORG 2000h
CLI 
MOV AL, 0FDH 
OUT PIC+1, AL 
MOV AL, N_CLK
OUT PIC+5, AL 
MOV AL, 1
OUT TIMER+1, AL
MOV AL, 0 
OUT PIO+3, AL ;PA ES PIO,PB ES PIO+1,CB ES PIO +3, CA ES PIO+2
OUT PIO+1, AL 
OUT TIMER, AL 

MOV CL,-1H
STI 
LAZO: JMP LAZO
ORG 3000H
RUT_CLK: CMP DH,01h
JZ SEGUIR2
seguir:INC CL 
CMP CL,07H
JNZ realizar_ops
MOV DH,01H
realizar_ops:CMP CL,00H
jnz SEGUIR_normal
mov LED,01h
JMP LUCES

SEGUIR_normal: MOV LED,02H
CMP DL,01h
JNZ seguir_iteracion
JMP LUCES

seguir_iteracion: mov CH,01H
looping: CMP CH,Cl
JZ LUCES
MOV DL,LED
ADD LED,DL
INC CH
JMP looping





SEGUIR2: CMP DH,01H
JNZ seguir
DEC CL
CMP CL,00H
JNZ realizar_ops_dos
MOV DH,0H
realizar_ops_dos: CMP CL,00h
jnz SEGUIR_normal
mov LED,01h
JMP LUCES


LUCES: MOV AL, LED
OUT PIO+1, AL
 MOV AL, 0
 OUT TIMER, AL
 MOV AL, 20H
 OUT PIC, AL
 IRET
END